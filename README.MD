#template-rest-api

##Portal Link 
https://anypoint.mulesoft.com/apiplatform/house-of-fraser/#/portals/organizations/2911456d-135d-4d0f-8074-5179db27b16f/apis/55089190/versions/3559633/pages/305627


###Purpose
The purpose of this API is as an example and template which can be copied and used as a base for creation of other APIs.


###How to use
1. Clone this repository.
2. Delete the .git folder from the project folder.
3. Import the project into Studio from pom.
4. Replace the files in src/main/api/ with your own RAML or update the template RAML as needed.
5. Right click on the project Mule -> Generate Flows from REST API.
5. Make the updates mentioned below.
6. Create a new repository in Bitbucket for your API and push the updated template to it as normal (git init etc.).


###Renaming
The following items will need to be renamed:

* Anypoint Studio Project Folder - Right click project -> Refactor -> Rename.

* Pom.xml - The "artifactID" and "name" elements.

* log4j2.xml - Replace "template-rest-api" with the name of the API.


####Properties
Every application will require two properties to be set at the environment level. These are:

* mule.env - This defines what environment the application is running in and is used to control what properties should be used. E.g. A Dev environment should connect to other Dev environments.

* properties.key - This is the key to be used for decrypting secure properties.

When developing in Studio the env property should be set to "local" and both properties can be set in the mule-app.properties file. In the other environments the properties will need to be set as runtime arguments.

The following properties are API specific and used to allow the API to connect to the API Manager.

* api.id & api.name - Both should be set in the global.properties file as it will be the same for all environments. The values can be found in the API Manager.

* api.version - Should be set in the environment specific properties (e.g. local.properties) as the version will be used to identify environments e.g. v1-dev.

###global.xml 
This configuration file should contain global connector configurations as well as any utility flows specific to the API and reused across config files.

###implementation.xml
For the template the API methods and resource implementation has been extracted into sub-flows in implementation.xml which are then called from the flows generated by APIKit.
If your API has many resources and operations then it will be worth extracting these further into more configuration files. E.g. A collection resource may have a separate xml file to an item resource.

###To Do:

* Currently the RAML and API doesn't follow an agreed schema for error handling or success responses. Once these are defined the Template will be updated.

* Currently property files only exist for local as we do not yet know what environments will exist.

* We will need to see whether the error handling should be moved into common or at least the error-handling-build-payload subflow."# test" 
