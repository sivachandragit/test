#--ODS DB Credentials--
db.driverName=com.microsoft.sqlserver.jdbc.SQLServerDriver
db.url=jdbc:sqlserver://202.65.154.168:1433;databaseName=MyDB
db.user=sivachandra
db.password=india@123

#--HTTP Inbound Endpoint Configuration Details--
http.host=0.0.0.0
http.port=8081

#--Configured the following queries in property file due to the following reason:
#--Reason: InMemory database used in Functional Test Cases dosen't support 'WITH (NOLOCK)' key word and 'ROW_NUMBER() OVER ( ORDER BY COULMN_NAME )' function.
#--GET Users Count DB Queries--
GET_USERS_COUNT_BY_CHANGEID = SELECT COUNT(1) AS COUNT FROM USER_CHANGE_AUDIT AS AUDIT  WITH (NOLOCK) WHERE AUDIT.CHANGE_ID='#[flowVars.changeId]';
GET_USERS_COUNT_BY_STATUS = SELECT COUNT(1) AS COUNT FROM USERS WITH (NOLOCK) WHERE IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0'];
GET_USERS_COUNT_BY_STATUS_AND_CHANGEID = SELECT COUNT(1) AS COUNT FROM USER_CHANGE_AUDIT AS AUDIT WITH (NOLOCK) LEFT OUTER JOIN USERS AS MASTER WITH (NOLOCK) ON AUDIT.EMPLOYEEID=MASTER.EMPLOYEEID WHERE AUDIT.CHANGE_ID='#[flowVars.changeId]' AND MASTER.IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0'];
GET_ALL_USERS_COUNT = SELECT COUNT(1) AS COUNT FROM [USERS] WITH (NOLOCK);

#--GET Users DB Queries--
GET_USERS_BY_CHANGEID = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER WITH (NOLOCK) LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD WITH (NOLOCK) ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE EXISTS (SELECT 'X' FROM (SELECT ROW_NUMBER() OVER (ORDER BY AUDIT.EMPLOYEEID) AS ROWNUM, AUDIT.EMPLOYEEID FROM USER_CHANGE_AUDIT AS AUDIT WITH (NOLOCK) WHERE AUDIT.CHANGE_ID='#[flowVars.changeId]') AS ROWCONSTRAINEDRESULT WHERE ROWCONSTRAINEDRESULT.EMPLOYEEID=MASTER.EMPLOYEEID AND ROWCONSTRAINEDRESULT.ROWNUM BETWEEN  #[flowVars.startRecord] AND #[flowVars.endRecord])  ORDER BY MASTER.EMPLOYEEID;
GET_USERS_BY_STATUS = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER WITH (NOLOCK) LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD WITH (NOLOCK) ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE EXISTS (SELECT 'X' FROM  ( SELECT    ROW_NUMBER() OVER ( ORDER BY EMPLOYEEID ) AS ROWNUM, EMPLOYEEID FROM USERS WITH (NOLOCK) WHERE IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0']) AS ROWCONSTRAINEDRESULT WHERE ROWCONSTRAINEDRESULT.EMPLOYEEID=MASTER.EMPLOYEEID AND ROWCONSTRAINEDRESULT.ROWNUM BETWEEN #[flowVars.startRecord] AND #[flowVars.endRecord]) ORDER BY MASTER.EMPLOYEEID;
GET_USERS_BY_STATUS_AND_CHANGEID = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER WITH (NOLOCK)  LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD WITH (NOLOCK) ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE EXISTS  (SELECT 'X' FROM (SELECT ROW_NUMBER() OVER (ORDER BY AUDIT.EMPLOYEEID) AS ROWNUM, AUDIT.EMPLOYEEID  FROM USER_CHANGE_AUDIT AS AUDIT WITH (NOLOCK) LEFT OUTER JOIN USERS AS MSTR WITH (NOLOCK) ON AUDIT.EMPLOYEEID=MSTR.EMPLOYEEID WHERE  AUDIT.CHANGE_ID='#[flowVars.changeId]' AND  MSTR.IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0'] ) AS ROWCONSTRAINEDRESULT  WHERE ROWCONSTRAINEDRESULT.EMPLOYEEID=MASTER.EMPLOYEEID AND ROWCONSTRAINEDRESULT.ROWNUM BETWEEN  #[flowVars.startRecord] AND  #[flowVars.endRecord]) ORDER BY MASTER.EMPLOYEEID;
GET_ALL_USERS = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER WITH (NOLOCK) LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD WITH (NOLOCK) ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE EXISTS (SELECT 'X' FROM ( SELECT    ROW_NUMBER() OVER ( ORDER BY EMPLOYEEID ) AS ROWNUM, EMPLOYEEID FROM USERS WITH (NOLOCK)) AS ROWCONSTRAINEDRESULT WHERE  ROWCONSTRAINEDRESULT.EMPLOYEEID=MASTER.EMPLOYEEID and ROWCONSTRAINEDRESULT.ROWNUM BETWEEN  #[flowVars.startRecord] AND #[flowVars.endRecord] ) ORDER BY MASTER.EMPLOYEEID;

#--PATCH Users DB Queries--
GET_EXISTING_USERS = SELECT MASTER.EMPLOYEEID,MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID,CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CHILD.CARDEFFECTIVETO FROM USERS AS MASTER WITH (NOLOCK) LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD WITH (NOLOCK) ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE MASTER.EMPLOYEEID IN (#[flowVars.receivedUserIDs]);

# Date formats
inbound.date.format = yyyy/MM/dd HH:mm
outbound.date.format = yyyy-MM-dd HH:mm:ss

# Generic Exception Message and Status Code
exception.message = The application has encountered an unknown error. It doesn't appear to have affected your data, but our technical staff have been automatically notified and will be looking into this.
exception.code = 500

# Upsert Users Success status code
upsert.users.success.status.code = 204
