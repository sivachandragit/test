#--InMemory DB Credentials--
db.driverName=org.h2.Driver
db.url=jdbc:h2:mem:MyDB
db.user=
db.password=

#--HTTP Inbound Endpoint Configuration Details--
http.host=0.0.0.0
http.port=8081

#--GET Users Count DB Queries for InMemory Database--
GET_USERS_COUNT_BY_CHANGEID = SELECT COUNT(1) AS COUNT FROM USER_CHANGE_AUDIT AS AUDIT WHERE AUDIT.CHANGE_ID='#[flowVars.changeId]';
GET_USERS_COUNT_BY_STATUS = SELECT COUNT(1) AS COUNT FROM USERS WHERE IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0'];
GET_USERS_COUNT_BY_STATUS_AND_CHANGEID = SELECT COUNT(1) AS COUNT FROM USER_CHANGE_AUDIT AS AUDIT LEFT OUTER JOIN USERS AS MASTER ON AUDIT.EMPLOYEEID=MASTER.EMPLOYEEID WHERE AUDIT.CHANGE_ID='#[flowVars.changeId]' AND MASTER.IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0'];
GET_ALL_USERS_COUNT = SELECT COUNT(1) AS COUNT FROM USERS;

#--GET Users DB Queries for InMemory Database--
GET_USERS_BY_CHANGEID = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE MASTER.EMPLOYEEID IN (SELECT AUDIT.EMPLOYEEID FROM USER_CHANGE_AUDIT AS AUDIT WHERE AUDIT.CHANGE_ID='#[flowVars.changeId]' AND ROWNUM()>=#[flowVars.startRecord] AND  ROWNUM()<=#[flowVars.endRecord])  ORDER BY MASTER.EMPLOYEEID;
GET_USERS_BY_STATUS = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE MASTER.EMPLOYEEID IN (SELECT EMPLOYEEID FROM USERS WHERE IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0'] AND ROWNUM()>=#[flowVars.startRecord] AND  ROWNUM()<=#[flowVars.endRecord]) ORDER BY MASTER.EMPLOYEEID;
GET_USERS_BY_STATUS_AND_CHANGEID = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE MASTER.EMPLOYEEID IN  (SELECT * FROM (SELECT AUDIT.EMPLOYEEID FROM USER_CHANGE_AUDIT AS AUDIT LEFT OUTER JOIN USERS AS MSTR ON AUDIT.EMPLOYEEID=MSTR.EMPLOYEEID WHERE  AUDIT.CHANGE_ID='#[flowVars.changeId]' AND  MSTR.IS_ACTIVE=#[(flowVars.status.toLowerCase()=='active')?'1':'0']) WHERE ROWNUM()>=#[flowVars.startRecord] AND  ROWNUM()<=#[flowVars.endRecord]) ORDER BY MASTER.EMPLOYEEID;
GET_ALL_USERS = SELECT MASTER.EMPLOYEEID, MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID, CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CARDEFFECTIVETO FROM USERS AS MASTER LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE  MASTER.EMPLOYEEID IN (SELECT EMPLOYEEID FROM USERS WHERE  ROWNUM()>=  #[flowVars.startRecord] AND ROWNUM()<= #[flowVars.endRecord] ) ORDER BY MASTER.EMPLOYEEID;

#--PATCH Users DB Queries for InMemory Database--
GET_EXISTING_USERS = SELECT MASTER.EMPLOYEEID,MASTER.FULLNAME, MASTER.RECEIPTNAME, MASTER.IS_ACTIVE, MASTER.WORKGROUPID,CHILD.CARDNUMBER,CHILD.CARDEFFECTIVEFROM,CHILD.CARDEFFECTIVETO FROM USERS AS MASTER LEFT OUTER JOIN STORE_USER_SWIPE_CARDS AS CHILD ON MASTER.EMPLOYEEID=CHILD.EMPLOYEEID WHERE MASTER.EMPLOYEEID IN (#[flowVars.receivedUserIDs]);

# Date formats
inbound.date.format = yyyy/MM/dd HH:mm
outbound.date.format = yyyy-MM-dd HH:mm:ss

# Generic Exception Message
exception.message = The application has encountered an unknown error. It doesn't appear to have affected your data, but our technical staff have been automatically notified and will be looking into this.
exception.code = 500

# Upsert Users Success status code
upsert.users.success.status.code = 204